#!/usr/bin/env bash

STATE="$HOME/.isgtk"

if [[ ! -f "$STATE" ]]; then
    echo "non" >"$STATE"
fi

isrofi="$(<$HOME/.config/dots/isrofi)"

if [[ "$isrofi" == "true" ]]; then
    WAL="$(~/.config/rofi/walselection.sh)"
else
    WAL="$(~/.config/wofi/scripts/wallsec.sh)"
fi

echo "$WAL" >&2
MODE="$(cat "$STATE")"
echo "$MODE"

case "$MODE" in
gtk)
    themesec -m "$WAL"
    themesec -d -g "$WAL"
    ;;
non) themesec -m "$WAL" ;;
*)
    echo "Invalid state: $MODE" >&2
    echo "non" >"$STATE"
    exit 1
    ;;
esac

MODE="$(<"$HOME/.config/dots/yaat")"
case "$MODE" in
true)
    themesec -a "$WAL"
    ;;
false)
    exit 0
    ;;
esac
